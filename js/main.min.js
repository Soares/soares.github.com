(function(){$(function(){$(".btn-group").button();return $("#fractals").css("display","block")})}).call(this);
(function(){var e,b,g,a,c,f,i,k=function(a,d){return function(){return a.apply(d,arguments)}};g=function(){function a(d,h){this.x=null!=d?d:0;this.y=null!=h?h:0;this.magSquared=k(this.magSquared,this);this.scale=k(this.scale,this);this.minus=k(this.minus,this);this.plus=k(this.plus,this);this.subtract=k(this.subtract,this);this.add=k(this.add,this)}a.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};a.prototype.subtract=function(a){this.x-=a.x;this.y-=a.y;return this};a.prototype.plus=
function(d){return new a(this.x+d.x,this.y+d.y)};a.prototype.minus=function(d){return new a(this.x-d.x,this.y-d.y)};a.prototype.scale=function(a){this.x*=a;this.y*=a;return this};a.prototype.magSquared=function(){return this.x*this.x+this.y*this.y};return a}();e=b=void 0;f=new g;c=new g;i=0;a=function(){var a;i++;a=Math.sin(i/15);b.attr("r",7+3*a);e.attr("r",4.3+-1.2*a);b.attr("stroke-width",3+1.5*a);a=f.minus(c);if(!(3>a.magSquared))return c.add(a.scale(0.25)),e.attr("cx",c.x),e.attr("cy",c.y),b.attr("cx",
c.x),b.attr("cy",c.y)};$(function(){e=$("#dot");b=$("#halo");c.x=parseFloat(e.attr("cx"));c.y=parseFloat(e.attr("cy"));$(window).mousemove(function(a){e.css("visibility","visible");b.css("visibility","visible");f.x=a.pageX-document.body.scrollLeft;return f.y=a.pageY-document.body.scrollTop});return setInterval(a,25)})}).call(this);
(function(){var e,b,g,a;a={};e=[];g=0;b=[[[0,1,0],[2,0,0],[3,4,5]],[[1,0,5],[2,3,0],[0,4,0]],[[1,0,0],[2,0,5],[3,4,0]],[[0,0,1],[2,3,0],[0,4,5]]];this.glide=function(c){var f,i,k,j,d,h,l;d=0;for(h=b[0].length;0<=h?d<h:d>h;0<=h?d++:d--){i=$("tr",c).eq(d);e[d]=[];j=0;for(l=b[0][d].length;0<=l?j<l:j>l;0<=l?j++:j--)f=$("td",i).eq(j),0<b[0][d][j]&&(a[b[0][d][j]]=$("a",f)),e[d][j]=f}k=function(){var h,d,c,l,f;g=(g+1)%b.length;h=b[g];for(d in a)c=a[d],c.detach();c=[];f=0;for(d=e.length;0<=d?f<d:f>d;0<=d?
f++:f--)c.push(function(){var d,c;c=[];l=0;for(d=e[f].length;0<=d?l<d:l>d;0<=d?l++:l--)0!==h[f][l]?c.push(e[f][l].append(a[h[f][l]])):c.push(void 0);return c}());return c};return $("#iterate").click(function(a){a.stopPropagation();return k()})}}).call(this);
(function(){var e;$(function(){return $.get("more.html",function(b){return e($("#more",b))})});e=function(b){var g,a,c;a=$("#card");a.after(b);this.glide($("#glider"));c=$("#to-more");g=$("#to-card");c.click(function(c){c.stopPropagation();a.slideToggle("fast",function(){return b.slideToggle("fast")});return!1});return g.click(function(c){c.stopPropagation();b.slideToggle("fast",function(){return a.slideToggle("fast")});return!1})}}).call(this);
(function(){var e,b=function(b,a){return function(){return b.apply(a,arguments)}};e=2*Math.PI;this.Oscilator=function(){function b(a,c,f,g){this.phase=null!=a?a:0;this.amplitude=null!=c?c:1;this.frequency=null!=f?f:1;this.offset=null!=g?g:0}b.prototype.value=function(a){return this.offset+this.amplitude*Math.sin(this.frequency*e*a+this.phase*e)};return b}();this.ColorWheel=function(){function b(a,c,f,e){this.h=a;this.s=null!=c?c:1;this.l=null!=f?f:0.5;this.t=null!=e?e:0}b.prototype.make=function(){return new b(this.h,
this.s,this.l)};b.prototype.step=function(){this.t++;return this};b.prototype.value=function(){var a,b,f;b=this.t/15;a=_.isNumber(this.h)?this.h:this.h.value(b);f=_.isNumber(this.s)?this.s:this.s.value(b);b=_.isNumber(this.l)?this.l:this.l.value(b);return Color.hsl(a,f,b).toString()};return b}();this.Turtle=function(){function g(a,c,f,e){this.pen=a;this.x=c;this.y=f;this.theta=e;this.forward=b(this.forward,this);this.look=b(this.look,this);this.move=b(this.move,this);this.jump=b(this.jump,this);this.go=
b(this.go,this);this.step=b(this.step,this);this.turn=b(this.turn,this);this.restore=b(this.restore,this);this.save=b(this.save,this);this.counter=0}g.prototype.save=function(){return{x:this.x,y:this.y,theta:this.theta}};g.prototype.restore=function(a){var b,f;for(b in a)f=a[b],this[b]=f;return this};g.prototype.turn=function(a){this.theta=(this.theta+a)%1;return this};g.prototype.step=function(a){null==a&&(a=1);this.x+=a*Math.cos(this.theta*e);this.y+=a*Math.sin(this.theta*e);return this};g.prototype.go=
function(a){null==a&&(a=1);this.step(a);this.pen.moveTo(this.x,this.y);return this};g.prototype.jump=function(a,b){this.x=a;this.y=b;return this};g.prototype.move=function(a,b){this.x+=a;this.y+=b;return this};g.prototype.look=function(a){this.theta=a;return this};g.prototype.forward=function(a){null==a&&(a=1);this.pen.beginPath();this.pen.moveTo(this.x,this.y);this.step(a);this.pen.lineTo(this.x,this.y);this.pen.closePath();this.pen.stroke();return this};return g}()}).call(this);
(function(){var e,b,g,a,c,f,i=function(a,h){return function(){return a.apply(h,arguments)}},k=Object.prototype.hasOwnProperty,j=function(a,h){function b(){this.constructor=a}for(var c in h)k.call(h,c)&&(a[c]=h[c]);b.prototype=h.prototype;a.prototype=new b;a.__super__=h.prototype;return a};b=function(){function a(h,b,d,c,f){var e,g=this;this.pen=h;this.x=b;this.y=d;this.step=i(this.step,this);this.iterate=i(this.iterate,this);e=new Turtle(h,this.x,this.y,c,f);this.states=[];this.colors=this.colors.make();
this.color=this.colors.value();this.progress=0;this.axiom=(this.axiom+"0").split("");this.actions={F:function(){return e.forward(f)},G:function(){return e.go(f)},"+":function(){return e.turn(g.angle)},"-":function(){return e.turn(-g.angle)},"[":function(){return g.states.push(e.save())},"]":function(){return e.restore(g.states.pop())},"0":function(){return g.iterate(e,f,c)}}}a.prototype.axiom="";a.prototype.rules={};a.prototype.angle=0.25;a.prototype.position=0;a.prototype.iterate=function(a,b,d){this.color=
this.colors.step().value();"function"===typeof this.reset&&this.reset(a,b,d);this.progress--;return this};a.prototype.step=function(a){var b,d,c;this.pen.strokeStyle=this.color;b=this.axiom.shift();this.axiom=this.axiom.concat((null!=(d=null!=(c=this.rules)?c[b]:void 0)?d:b).split(""));if(a)return this;if("function"===typeof(a=this.actions)[b])a[b]();this.progress++;return"F"===b?this:this.step()};return a}();e=function(a){function b(a,d,c,e,f){this.step=i(this.step,this);this.reset=i(this.reset,
this);this.batching=0;b.__super__.constructor.call(this,a,d,c,e,3*f)}j(b,a);b.prototype.axiom="FX";b.prototype.rules={X:"X+YF",Y:"FX-Y"};b.prototype.angle=0.25;b.prototype.colors=new ColorWheel(new Oscilator(0.25,0.075,0.5,0.075));b.prototype.reset=function(){return this.batching=this.progress};b.prototype.step=function(a){var d,c;if(!a&&0<this.batching){d=Math.min(100,this.batching);for(c=0;0<=d?c<d:c>d;0<=d?c++:c--)this.step(!0);this.batching-=d}else return b.__super__.step.apply(this,arguments)};
return b}(b);c=function(a){function b(){b.__super__.constructor.apply(this,arguments)}j(b,a);b.prototype.axiom="F++F++F";b.prototype.rules={F:"F-F++F-F"};b.prototype.angle=1/6;b.prototype.colors=new ColorWheel(new Oscilator(0.125,0.08,1,0.54),1,new Oscilator(0.25,0.125,0.5,0.625));return b}(b);g=function(a){function b(a,c,d,e,f){this.reset=i(this.reset,this);b.__super__.constructor.call(this,a,c,d,e+0.25,3*f)}j(b,a);b.prototype.axiom="FX";b.prototype.rules={X:"F-[[X]+X]+F[+FX]-X",F:"FF"};b.prototype.angle=
-25/360;b.prototype.colors=new ColorWheel(new Oscilator(0,0.105,1,0.275));b.prototype.reset=function(a,c){a.jump(a.x+0.5*c*Math.pow(this.progress,0.5),this.y).look(this.angle);return b.__super__.reset.apply(this,arguments)};return b}(b);f=0;a=function(a){function b(a,c,d,e,g){this.reset=i(this.reset,this);var j;j=f%6/6;this.colors=new ColorWheel(new Oscilator(0.29*f%1,0.5,0.265,0.76));b.__super__.constructor.call(this,a,c,d,e+j,g);f++}j(b,a);b.prototype.axiom="FX";b.prototype.rules={X:"Y-FX-FY",Y:"X+FY+FX"};
b.prototype.angle=-1/6;b.prototype.reset=function(){};return b}(b);b=function(a){function b(a,c,d,e,f){this.reset=i(this.reset,this);b.__super__.constructor.call(this,a,c,d,e-0.25,6*f)}j(b,a);b.prototype.axiom="FX";b.prototype.rules={X:"F[-FFX]+FX"};b.prototype.angle=0.0625;b.prototype.colors=new ColorWheel(new Oscilator(0,0.105,0.8,0.265));b.prototype.reset=function(a,b,c){return a.jump(this.x,this.y).look(c)};return b}(b);this.Fractals={fire:e,earth:b,snow:c,tri:a,hidden:g}}).call(this);
(function(){var e,b;e=[];b=0;$(function(){var g,a,c,f,i,k,j,d;k=function(){return b=b||setInterval(d,0)};j=function(){e=[];a.removeClass("going").removeClass("paused");return b=clearInterval(b)};d=function(){var a,b,c,d;d=[];b=0;for(c=e.length;b<c;b++)a=e[b],d.push(a.step());return d};i=document.getElementById("canvas").getContext("2d");a=$("#controls");c=$("#fractals");g=$("body");$(window).resize(function(){i.canvas.width=window.innerWidth;i.canvas.height=window.innerHeight;return j()}).trigger("resize");
$("#svg, #canvas, #dot, #halo").mouseup(function(b){b.stopPropagation();a.is(".paused")&&(e=[]);a.removeClass("paused").addClass("going");e.push(new f(i,b.pageX-document.body.scrollLeft,b.pageY-document.body.scrollTop,0,1));k();return!1});f=Fractals[g.attr("class")];$("button",c).click(function(){var a;a=$(this).button("toggle").data("fractal");f=Fractals[a];return g.removeClass().addClass(a)});$(".control",a).click(function(){if(a.is(".going"))return a.removeClass("going").addClass("paused"),b=clearInterval(b);
a.removeClass("paused").addClass("going");return k()});return $(".clear",a).click(function(){i.clearRect(0,0,i.canvas.width,i.canvas.height);return j()})})}).call(this);
