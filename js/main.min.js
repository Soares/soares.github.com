(function(){var c,a,d,b,e,h,g,k=function(b,f){return function(){return b.apply(f,arguments)}};d=function(){function b(f,i){this.x=null!=f?f:0;this.y=null!=i?i:0;this.magSquared=k(this.magSquared,this);this.scale=k(this.scale,this);this.minus=k(this.minus,this);this.plus=k(this.plus,this);this.subtract=k(this.subtract,this);this.add=k(this.add,this)}b.prototype.add=function(b){this.x+=b.x;this.y+=b.y;return this};b.prototype.subtract=function(b){this.x-=b.x;this.y-=b.y;return this};b.prototype.plus=
function(f){return new b(this.x+f.x,this.y+f.y)};b.prototype.minus=function(f){return new b(this.x-f.x,this.y-f.y)};b.prototype.scale=function(b){this.x*=b;this.y*=b;return this};b.prototype.magSquared=function(){return this.x*this.x+this.y*this.y};return b}();c=a=void 0;h=new d;e=new d;g=0;b=function(){var b;g++;b=Math.sin(g/15);a.attr("r",7+3*b);c.attr("r",4.3+-1.2*b);a.attr("stroke-width",3+1.5*b);b=h.minus(e);if(!(3>b.magSquared))return e.add(b.scale(0.25)),c.attr("cx",e.x),c.attr("cy",e.y),a.attr("cx",
e.x),a.attr("cy",e.y)};$(function(){c=$("#dot");a=$("#halo");e.x=parseFloat(c.attr("cx"));e.y=parseFloat(c.attr("cy"));$(window).mousemove(function(b){c.css("visibility","visible");a.css("visibility","visible");h.x=b.pageX-document.body.scrollLeft;return h.y=b.pageY-document.body.scrollTop});return setInterval(b,25)})}).call(this);
(function(){var c,a=function(a,b){return function(){return a.apply(b,arguments)}};c=2*Math.PI;this.Oscilator=function(){function a(b,e,d,c){this.phase=null!=b?b:0;this.amplitude=null!=e?e:1;this.frequency=null!=d?d:1;this.offset=null!=c?c:0}a.prototype.value=function(b){return this.offset+this.amplitude*Math.sin(this.frequency*c*b+this.phase*c)};return a}();this.ColorWheel=function(){function a(b,e,c,d){this.h=b;this.s=null!=e?e:1;this.l=null!=c?c:0.5;this.t=null!=d?d:0}a.prototype.make=function(){return new a(this.h,
this.s,this.l)};a.prototype.step=function(){this.t++;return this};a.prototype.value=function(){var b,a,c;a=this.t/15;b=_.isNumber(this.h)?this.h:this.h.value(a);c=_.isNumber(this.s)?this.s:this.s.value(a);a=_.isNumber(this.l)?this.l:this.l.value(a);return Color.hsl(b,c,a).toString()};return a}();this.Turtle=function(){function d(b,c,d,g){this.pen=b;this.x=c;this.y=d;this.theta=g;this.forward=a(this.forward,this);this.look=a(this.look,this);this.move=a(this.move,this);this.jump=a(this.jump,this);this.go=
a(this.go,this);this.step=a(this.step,this);this.turn=a(this.turn,this);this.restore=a(this.restore,this);this.save=a(this.save,this);this.counter=0}d.prototype.save=function(){return{x:this.x,y:this.y,theta:this.theta}};d.prototype.restore=function(b){var a,c;for(a in b)c=b[a],this[a]=c;return this};d.prototype.turn=function(b){this.theta=(this.theta+b)%1;return this};d.prototype.step=function(b){null==b&&(b=1);this.x+=b*Math.cos(this.theta*c);this.y+=b*Math.sin(this.theta*c);return this};d.prototype.go=
function(b){null==b&&(b=1);this.step(b);this.pen.moveTo(this.x,this.y);return this};d.prototype.jump=function(b,a){this.x=b;this.y=a;return this};d.prototype.move=function(b,a){this.x+=b;this.y+=a;return this};d.prototype.look=function(b){this.theta=b;return this};d.prototype.forward=function(b){null==b&&(b=1);this.pen.beginPath();this.pen.moveTo(this.x,this.y);this.step(b);this.pen.lineTo(this.x,this.y);this.pen.closePath();this.pen.stroke();return this};return d}()}).call(this);
(function(){var c,a,d,b,e,h,g=function(b,i){return function(){return b.apply(i,arguments)}},k=Object.prototype.hasOwnProperty,j=function(b,i){function a(){this.constructor=b}for(var c in i)k.call(i,c)&&(b[c]=i[c]);a.prototype=i.prototype;b.prototype=new a;b.__super__=i.prototype;return b};a=function(){function b(i,a,c,d,f){var e,h=this;this.pen=i;this.x=a;this.y=c;this.step=g(this.step,this);this.iterate=g(this.iterate,this);e=new Turtle(i,this.x,this.y,d,f);this.states=[];this.colors=this.colors.make();
this.color=this.colors.value();this.progress=0;this.axiom=(this.axiom+"0").split("");this.actions={F:function(){return e.forward(f)},G:function(){return e.go(f)},"+":function(){return e.turn(h.angle)},"-":function(){return e.turn(-h.angle)},"[":function(){return h.states.push(e.save())},"]":function(){return e.restore(h.states.pop())},"0":function(){return h.iterate(e,f,d)}}}b.prototype.axiom="";b.prototype.rules={};b.prototype.angle=0.25;b.prototype.position=0;b.prototype.iterate=function(b,a,c){this.color=
this.colors.step().value();"function"===typeof this.reset&&this.reset(b,a,c);this.progress--;return this};b.prototype.step=function(b){var a,c,d;this.pen.strokeStyle=this.color;a=this.axiom.shift();this.axiom=this.axiom.concat((null!=(c=null!=(d=this.rules)?d[a]:void 0)?c:a).split(""));if(b)return this;if("function"===typeof(b=this.actions)[a])b[a]();this.progress++;return"F"===a?this:this.step()};return b}();c=function(b){function a(b,c,d,f,e){this.step=g(this.step,this);this.reset=g(this.reset,
this);this.batching=0;a.__super__.constructor.call(this,b,c,d,f,3*e)}j(a,b);a.prototype.axiom="FX";a.prototype.rules={X:"X+YF",Y:"FX-Y"};a.prototype.angle=0.25;a.prototype.colors=new ColorWheel(new Oscilator(0.25,0.075,0.5,0.075));a.prototype.reset=function(){return this.batching=this.progress};a.prototype.step=function(b){var c,d;if(!b&&0<this.batching){c=Math.min(100,this.batching);for(d=0;0<=c?d<c:d>c;0<=c?d++:d--)this.step(!0);this.batching-=c}else return a.__super__.step.apply(this,arguments)};
return a}(a);e=function(b){function a(){a.__super__.constructor.apply(this,arguments)}j(a,b);a.prototype.axiom="F++F++F";a.prototype.rules={F:"F-F++F-F"};a.prototype.angle=1/6;a.prototype.colors=new ColorWheel(new Oscilator(0.125,0.08,1,0.54),1,new Oscilator(0.25,0.125,0.5,0.625));return a}(a);d=function(b){function a(b,c,d,e,f){this.reset=g(this.reset,this);a.__super__.constructor.call(this,b,c,d,e+0.25,3*f)}j(a,b);a.prototype.axiom="FX";a.prototype.rules={X:"F-[[X]+X]+F[+FX]-X",F:"FF"};a.prototype.angle=
-25/360;a.prototype.colors=new ColorWheel(new Oscilator(0,0.105,1,0.275));a.prototype.reset=function(b,c){b.jump(b.x+0.5*c*Math.pow(this.progress,0.5),this.y).look(this.angle);return a.__super__.reset.apply(this,arguments)};return a}(a);h=0;b=function(b){function a(b,c,d,e,f){this.reset=g(this.reset,this);var j;j=h%6/6;this.colors=new ColorWheel(new Oscilator(0.29*h%1,0.5,0.265,0.76));a.__super__.constructor.call(this,b,c,d,e+j,f);h++}j(a,b);a.prototype.axiom="FX";a.prototype.rules={X:"Y-FX-FY",Y:"X+FY+FX"};
a.prototype.angle=-1/6;a.prototype.reset=function(){};return a}(a);a=function(b){function a(b,c,d,e,f){this.reset=g(this.reset,this);a.__super__.constructor.call(this,b,c,d,e-0.25,6*f)}j(a,b);a.prototype.axiom="FX";a.prototype.rules={X:"F[-FFX]+FX"};a.prototype.angle=0.0625;a.prototype.colors=new ColorWheel(new Oscilator(0,0.105,0.8,0.265));a.prototype.reset=function(b,a,c){return b.jump(this.x,this.y).look(c)};return a}(a);this.Fractals={fire:c,earth:a,snow:e,tri:b,hidden:d}}).call(this);
(function(){var c,a,d,b;b={};c=[];d=0;a=[[[0,1,0],[2,0,0],[3,4,5]],[[1,0,5],[2,3,0],[0,4,0]],[[1,0,0],[2,0,5],[3,4,0]],[[0,0,1],[2,3,0],[0,4,5]]];this.glide=function(e){var h,g,k,j,f,i,l;f=0;for(i=a[0].length;0<=i?f<i:f>i;0<=i?f++:f--){g=$("tr",e).eq(f);c[f]=[];j=0;for(l=a[0][f].length;0<=l?j<l:j>l;0<=l?j++:j--)h=$("td",g).eq(j),0<a[0][f][j]&&(b[a[0][f][j]]=$("a",h)),c[f][j]=h}k=function(){var e,f,i,h,g;d=(d+1)%a.length;e=a[d];for(f in b)i=b[f],i.detach();i=[];g=0;for(f=c.length;0<=f?g<f:g>f;0<=f?
g++:g--)i.push(function(){var a,d;d=[];h=0;for(a=c[g].length;0<=a?h<a:h>a;0<=a?h++:h--)0!==e[g][h]?d.push(c[g][h].append(b[e[g][h]])):d.push(void 0);return d}());return i};return $("#iterate").click(function(b){b.stopPropagation();return k()})}}).call(this);
(function(){var c,a;c=[];a=0;$(function(){var d,b,e,h,g,k,j,f;k=function(){return a=a||setInterval(f,0)};j=function(){c=[];b.removeClass("going").removeClass("paused");return a=clearInterval(a)};f=function(){var b,a,d,e;e=[];a=0;for(d=c.length;a<d;a++)b=c[a],e.push(b.step());return e};g=document.getElementById("canvas").getContext("2d");b=$("#controls");e=$("#fractals");d=$("body");$(window).resize(function(){g.canvas.width=window.innerWidth;g.canvas.height=window.innerHeight;return j()}).trigger("resize").click(function(a){b.is(".paused")&&
(c=[]);b.removeClass("paused").addClass("going");c.push(new h(g,a.pageX-document.body.scrollLeft,a.pageY-document.body.scrollTop,0,1));return k()});h=Fractals[d.attr("class")];$("button",b.add(e)).click(function(a){return a.stopPropagation()});$("button",e).click(function(){var a;a=$(this).button("toggle").data("fractal");h=Fractals[a];return d.removeClass().addClass(a)});$(".control",b).click(function(){if(b.is(".going"))return b.removeClass("going").addClass("paused"),a=clearInterval(a);b.removeClass("paused").addClass("going");
return k()});return $(".clear",b).click(function(){g.clearRect(0,0,g.canvas.width,g.canvas.height);return j()})})}).call(this);
(function(){var c;$(function(){return $.get("more.html",function(a){return c($("#more",a))})});c=function(a){var c,b,e;b=$("#card");b.after(a);this.glide($("#glider"));e=$("#to-more");c=$("#to-card");e.click(function(c){c.stopPropagation();b.slideToggle("fast",function(){return a.slideToggle("fast")});return!1});return c.click(function(c){c.stopPropagation();a.slideToggle("fast",function(){return b.slideToggle("fast")});return!1})}}).call(this);
(function(){$(function(){$(".btn-group").button();return $("#fractals").css("display","block")})}).call(this);
